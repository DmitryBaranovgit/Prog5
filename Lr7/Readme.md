# Лабораторная работа 7: Использование шаблона «Наблюдатель»

# Цель работы
Создать программу на языке Python, которая реализует паттерн проектирования «Наблюдатель» для отслеживания изменений курсов валют через API Центробанка. Программа должна периодически запрашивать курсы валют и уведомлять зарегистрированых наблюдателей об изменениях.

# Структура проекта
## Объекты и Наблюдатели
- **Объект(Subject)** - веб-сервер на базе Tornado, который запрашивает курсы валют с API Центробанка и отслеживает изменения. При изменении данных он уведомляет всех наблюдателей.

- **Наблюдатели(Observers) - HTML-страницы клиентов, подключенные к серверу через WebSocket. Каждая клиентская страница отображает уникальный идентификатор клиента и текущие курсы валют в реальном времени.

## Файлы проекта
- **app.py**: Основной Python-файл, который создает сервер, обрабатывает WebSocket-соединения и реализует паттерн «Наблюдатель».
- **index.html**: HTML-страница, отображающая уникальный идентификатор клиента и обновляющая курсы валют в реальном времени с помощью WebSocket.

# Описание работы
## Классы и их роли
1. ```CurrencyRateFetcher``` - класс, отвечающий за получение и хранение текущих курсов валют. Периодически запрашивает данные с API Центробанка и вызывает метод ```notify_observers``` для оповещения клиентов.

2.```CurrencyRateHandler``` - WebSocket-обработчик, который управляет соединениями с клиентами, добавляя и удаляя их из списка наблюдателей.

3. ```MainHandler``` - HTTP-обработчик для отображения главной страницы клиента с уникальным идентификатором.

4. ```Application``` - Основной класс приложения Tornado, который настраивает маршруты и периодическое обновление курсов валют с заданным интервалом (10 секунд).

## Принцип работы
1. При старте сервер Tornado создает экземпляр ```CurrencyRateFetcher```, который каждые 10 секунд запрашивает курсы валют с API и уведомляет клиентов о новых значениях.
2. Клиенты подключаются к серверу через WebSocket и получают обновления курсов валют, которые отображаются на HTML-странице.

## Пример кода
![app.py]()
![index.html]()

## Источники и примеры 
![Наблюдатель на Python](https://refactoringguru.cn/ru/design-patterns/observer/python/example)
![Tornado WebSocket Пример](https://github.com/tornadoweb/tornado/tree/stable/demos/websocket)

## Заключение
Этот проект иллюстрирует, как паттерн проектирования «Наблюдатель» позволяет передавать обновленные данные клиентам в реальном времени, используя Tornado и WebSocket.

 






